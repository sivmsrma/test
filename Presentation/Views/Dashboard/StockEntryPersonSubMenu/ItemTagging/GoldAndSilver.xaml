<Window
    x:Class="Terret_Billing.Presentation.Views.Dashboard.StockEntryPersonSubMenu.ItemTagging.GoldAndSilver"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:Terret_Billing.Presentation.Converters"
    xmlns:local="clr-namespace:Terret_Billing.Presentation.Views.Dashboard.StockEntryPersonSubMenu.ItemTagging"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    Title="Gold and Silver Tagging"
    Height="920" Width="1400"
    WindowState="Maximized"
    Background="{DynamicResource MaterialDesignPaper}"
    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
    TextElement.FontWeight="Regular"
    TextElement.FontSize="14"
    TextOptions.TextFormattingMode="Ideal"
    TextOptions.TextRenderingMode="Auto"
    FontFamily="Roboto">

    <Window.Resources>
        <!-- Value Converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:NullToBoolConverter x:Key="NullToBoolConverter"/>
        <converters:DecimalConverter x:Key="DecimalConverter" />

        <!-- Material Design Styles -->
        <Style x:Key="MaterialDesignTitleTextBlock" TargetType="TextBlock"
               BasedOn="{StaticResource MaterialDesignTextBlock}">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource PrimaryHueMidBrush}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <Style x:Key="MaterialDesignLabelTextBlock" TargetType="TextBlock"
               BasedOn="{StaticResource MaterialDesignTextBlock}">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <Style x:Key="MaterialDesignAnimatedButton" TargetType="Button"
               BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Background" Value="Purple"/>
            <Setter Property="BorderBrush" Value="{DynamicResource PrimaryHueMidBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Width" Value="90"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp2"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="MaterialDesignDataGrid" TargetType="DataGrid"
               BasedOn="{StaticResource MaterialDesignDataGrid}">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{DynamicResource MaterialDesignDivider}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="AlternatingRowBackground" Value="{DynamicResource MaterialDesignPaper}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="RowHeight" Value="35"/>
            <Setter Property="ColumnHeaderHeight" Value="40"/>
        </Style>

        <Style x:Key="MaterialDesignDataGridColumnHeader" TargetType="DataGridColumnHeader"
               BasedOn="{StaticResource MaterialDesignDataGridColumnHeader}">
            <Setter Property="Background" Value="{DynamicResource PrimaryHueLightBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style x:Key="DataGridCellVerticalDivider" TargetType="DataGridCell">
            <Setter Property="BorderBrush" Value="#DDD"/>
            <Setter Property="BorderThickness" Value="0,0,1,0"/>
            <Setter Property="Padding" Value="4,0,4,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- User Info Header -->
        
            <TextBlock x:Name="UserInfoTextBlock"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Margin="10" Visibility="Hidden"
                       FontWeight="Bold"
                       Text="{Binding UserInfo}" />
        

        <!-- Company Name and User Name Row -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="5">
                <materialDesign:PackIcon Kind="Business" VerticalAlignment="Center"  />
                <TextBlock Text="Company Name:" Style="{StaticResource MaterialDesignLabelTextBlock}" FontSize="15" Margin="5,2,0,0"/>
                <TextBlock x:Name="CompanyName" Text="{Binding CompanyName}" Margin="5,2,0,0"
                           FontSize="15" FontWeight="Medium" VerticalAlignment="Center"  FontFamily="calibari"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                <materialDesign:PackIcon Kind="Account" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBlock Text="User Name:" Style="{StaticResource MaterialDesignLabelTextBlock}" Margin="5,10,0,0" FontSize="15"/>
                <TextBlock x:Name="UserName" Text="{Binding UserName}" Margin="5,5,0,0" 
                           FontSize="15" FontWeight="Medium" VerticalAlignment="Center" FontFamily="calibari"/>
            </StackPanel>
        </Grid>

        <!-- Stock Type Row -->
        <Grid Grid.Row="2" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="{Binding SelectedMetalType}" Width="100"
                       Style="{StaticResource MaterialDesignTitleTextBlock}" VerticalAlignment="Center" Margin="10,20,5,0"/>

            <!-- Particular -->
            <StackPanel Grid.Column="1" Margin="4">
                <TextBlock Text="Particular" Style="{StaticResource MaterialDesignLabelTextBlock}" Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                <TextBox x:Name="txtParticular" Padding="10"
             Text="{Binding Entry.Particular, Mode=OneWay}"
             Style="{StaticResource MaterialDesignOutlinedTextBox}"
             Height="35" materialDesign:HintAssist.Hint="Particular"
             materialDesign:HintAssist.IsFloating="True" IsReadOnly="True"
             TabIndex="1" ToolTip="Particular" AutomationProperties.Name="Particular" />
            </StackPanel>

            <!-- Party Name -->
            <StackPanel Grid.Column="2" Margin="4">
                <TextBlock Text="Party Name" Style="{StaticResource MaterialDesignLabelTextBlock}" Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                <TextBox x:Name="PartyName" Padding="10"
             Text="{Binding Entry.PartyName, Mode=OneWay}"
             Style="{StaticResource MaterialDesignOutlinedTextBox}"
             Height="35"
             materialDesign:HintAssist.Hint="Party Name"
             materialDesign:HintAssist.IsFloating="True"
             IsReadOnly="True"
             TabIndex="2"
             ToolTip="Party Name"
             AutomationProperties.Name="Party Name"/>
            </StackPanel>

            <!-- Invoice No -->
            <StackPanel Grid.Column="3" Margin="4">
                <TextBlock Text="Invoice No." Style="{StaticResource MaterialDesignLabelTextBlock}" Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                <TextBox x:Name="InvoiceNo" Padding="10"
             Text="{Binding Entry.InvoiceNo, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
             Style="{StaticResource MaterialDesignOutlinedTextBox}"
             Height="35"
             materialDesign:HintAssist.Hint="Invoice No."
             materialDesign:HintAssist.IsFloating="True"
             IsReadOnly="True"
             TabIndex="3"
             ToolTip="Invoice Number"
             AutomationProperties.Name="Invoice No"/>
            </StackPanel>

            <!-- Entry Date   Margin="0,27,0,0" -->
            <StackPanel Grid.Column="4" Margin="4">
                <DatePicker x:Name="EntryDatePicker" Grid.Column="8" HorizontalAlignment="Left" Margin="0,27,0,0" VerticalAlignment="Top"  BorderThickness="2"  Width="100"/>
            </StackPanel>
            
            <!-- Refresh Button -->
            <Button Grid.Column="5" Content="Refresh" x:Name="RefreshButton" Click="RefreshButton_Click"
                    Style="{StaticResource MaterialDesignAnimatedButton}" TabIndex="4" VerticalAlignment="Bottom"/>

           
          
        </Grid>

        <!-- Row 3 -->
        <Grid Grid.Row="3" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="0.3*"/>
                <ColumnDefinition Width="0.4*"/>
                <ColumnDefinition Width="0.6*"/>
                <ColumnDefinition Width="0.5*"/>
                <ColumnDefinition Width="0.4*"/>
                <ColumnDefinition Width="0.6*"/>
                <ColumnDefinition Width="0.6*"/>
                <ColumnDefinition Width="0.6*"/>
            </Grid.ColumnDefinitions>

            <!-- Image Icon -->
            <materialDesign:PackIcon Grid.Column="0" Kind="Image" Width="40" Height="40"
                                     HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4,20,4,0"
                                     Foreground="{DynamicResource PrimaryHueMidBrush}" TabIndex="9"/>

            <!-- Category ComboBox -->
            <StackPanel Grid.Column="1" Margin="4">
                <TextBlock Text="Category" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <ComboBox x:Name="Category" Style="{StaticResource MaterialDesignOutlinedComboBox}" Height="35" Padding="10"
                          ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          materialDesign:HintAssist.Hint="Category" materialDesign:HintAssist.IsFloating="True"
                          TabIndex="10" ToolTip="Select Category" AutomationProperties.Name="Category"/>
            </StackPanel>

            <!-- Sub Category ComboBox -->
            <StackPanel Grid.Column="2" Margin="4">
                <TextBlock Text="Sub-Category" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <ComboBox x:Name="SubCategory" Style="{StaticResource MaterialDesignOutlinedComboBox}" Height="35" Padding="10"
                          ItemsSource="{Binding SubCategories}" SelectedItem="{Binding SelectedSubCategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          IsEnabled="{Binding ElementName=Category, Path=SelectedItem, Converter={StaticResource NullToBoolConverter}}"
                          materialDesign:HintAssist.Hint="Sub-Category" materialDesign:HintAssist.IsFloating="True"
                          TabIndex="11" ToolTip="Select Sub-Category" AutomationProperties.Name="Sub-Category"/>
            </StackPanel>

            <!-- Design ComboBox -->
            <StackPanel Grid.Column="3" Margin="4">
                <TextBlock Text="Design" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <ComboBox x:Name="Design" Style="{StaticResource MaterialDesignOutlinedComboBox}" Height="35" Padding="10"
                          ItemsSource="{Binding Designs}" SelectedItem="{Binding SelectedDesign, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          IsEnabled="{Binding ElementName=SubCategory, Path=SelectedItem, Converter={StaticResource NullToBoolConverter}}"
                          materialDesign:HintAssist.Hint="Design" materialDesign:HintAssist.IsFloating="True"
                          TabIndex="12" ToolTip="Select Design" AutomationProperties.Name="Design"/>
            </StackPanel>

            <!-- Add Icon -->
            <StackPanel Grid.Column="4" HorizontalAlignment="Center" Width="43" Margin="4">
                <TextBlock Text="Add" FontSize="16" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}"
                           HorizontalAlignment="Center"/>
                <Border Cursor="Hand" MouseLeftButtonDown="AddItem_MouseLeftButtonDown">
                    <materialDesign:PackIcon Kind="PlusCircle" Width="24" Height="24"
                                             HorizontalAlignment="Center" VerticalAlignment="Center"
                                             Foreground="{DynamicResource SuccessBrush}"/>
                </Border>
            </StackPanel>

            <!-- Purity TextBox -->
            <StackPanel Grid.Column="5" Margin="4">
                <TextBlock Text="Purity" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="PurityTextBox" Text="{Binding Entry.Purity, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Purity" materialDesign:HintAssist.IsFloating="True"
                         IsReadOnly="True" TabIndex="13" ToolTip="Purity" AutomationProperties.Name="Purity"/>
            </StackPanel>


            <StackPanel Grid.Column="6" Margin="4">
                <TextBlock Text="HSN No." Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="HSNNO" Text="{Binding HSN_No, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="HSN No." materialDesign:HintAssist.IsFloating="True"
                         IsReadOnly="True" TabIndex="14" ToolTip="HSN Number" AutomationProperties.Name="HSN No"/>
            </StackPanel>

            <!-- Size -->
            <StackPanel Grid.Column="7" Margin="4">
                <TextBlock Text="Size" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="Size" Text="{Binding Entry.Size, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Size" materialDesign:HintAssist.IsFloating="True"
                         TabIndex="15" ToolTip="Size" AutomationProperties.Name="Size"/>
            </StackPanel>

            <!-- PCS -->
            <StackPanel Grid.Column="8" Margin="4">
                <TextBlock Text="PCS" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="Pcs" Text="{Binding Entry.Pcs, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="PCS" materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="16" ToolTip="Pieces" AutomationProperties.Name="PCS"/>
            </StackPanel>

            <!-- Weight -->
            <StackPanel Grid.Column="9" Margin="4">
                <TextBlock Text="Weight" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="Weight" Text="{Binding Entry.Gross_Wt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalConverter}}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Weight" materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="17" ToolTip="Gross Weight" AutomationProperties.Name="Weight"/>
            </StackPanel>

            <!-- Less Weight -->
            <StackPanel Grid.Column="10" Margin="4">
                <TextBlock Text="Less Wt." Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="LessWt" Text="{Binding Entry.Less_Wt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalConverter}}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Less Wt." materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="18" ToolTip="Less Weight" AutomationProperties.Name="Less Weight"/>
            </StackPanel>

            <!-- Net Weight -->
            <StackPanel Grid.Column="11" Margin="4">
                <TextBlock Text="Net Wt." Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="NetWt" Text="{Binding Entry.Net_Wt, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Net Wt." materialDesign:HintAssist.IsFloating="True"
                         IsReadOnly="True" TabIndex="19" ToolTip="Net Weight" AutomationProperties.Name="Net Weight"/>
            </StackPanel>
        </Grid>

        <!-- Row 4 -->
        <Grid Grid.Row="4" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Tunch % -->
            <StackPanel Grid.Column="0" Margin="4">
                <TextBlock Text="Tunch%" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="Tunch" Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Tunch%" materialDesign:HintAssist.IsFloating="True"
                         TextChanged="CalculateTunchWeight_TextChanged" PreviewTextInput="NumberValidationTextBox"
                         TabIndex="20" ToolTip="Tunch Percentage" AutomationProperties.Name="Tunch %"/>
            </StackPanel>

            <!-- Tunch Wt -->
            <StackPanel Grid.Column="1" Margin="4">
                <TextBlock Text="Tunch Wt." Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="TunchWt" Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Tunch Wt." materialDesign:HintAssist.IsFloating="True"
                         TextChanged="CalculateTunchWeight_TextChanged" PreviewTextInput="NumberValidationTextBox"
                         TabIndex="21" ToolTip="Tunch Weight" AutomationProperties.Name="Tunch Weight"/>
            </StackPanel>

            <!-- Waste % -->
            <StackPanel Grid.Column="2" Margin="4">
                <TextBlock Text="Waste %" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="WastePer" Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Waste %" materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="22" ToolTip="Waste Percentage" AutomationProperties.Name="Waste %"/>
            </StackPanel>

            <!-- Waste Amount -->
            <StackPanel Grid.Column="3" Margin="4">
                <TextBlock Text="Waste Amt" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="WasteAmt" Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Waste Amt" materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="23" ToolTip="Waste Amount" AutomationProperties.Name="Waste Amount"/>
            </StackPanel>

            <!-- Stone Ct -->
            <StackPanel Grid.Column="4" Margin="4">
                <TextBlock Text="Stone Ct" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="StoneCt" Text="{Binding StoneCt, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DecimalConverter}}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Stone Ct" materialDesign:HintAssist.IsFloating="True"
                         PreviewTextInput="NumberValidationTextBox" TabIndex="24" ToolTip="Stone Carat" AutomationProperties.Name="Stone Ct"/>
            </StackPanel>

            <!-- Final Wt -->
            <StackPanel Grid.Column="5" Margin="4">
                <TextBlock Text="Final Wt." Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="FinalWt" Text="{Binding FinalWt, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Final Wt." materialDesign:HintAssist.IsFloating="True"
                         IsReadOnly="True" TabIndex="25" ToolTip="Final Weight" AutomationProperties.Name="Final Weight"/>
            </StackPanel>

            <!-- Comment -->
            <StackPanel Grid.Column="6" Margin="4">
                <TextBlock Text="Comment" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="Comment" Text="{Binding Entry.Comment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Comment" materialDesign:HintAssist.IsFloating="True"
                         TabIndex="26" ToolTip="Comment" AutomationProperties.Name="Comment"/>
            </StackPanel>

            <!-- Save Button -->
            <Button Grid.Column="7" x:Name="SaveButton" Content="Save" VerticalAlignment="Bottom"
                    Style="{StaticResource MaterialDesignAnimatedButton}" Click="SaveButton_Click" TabIndex="27"/>

            <!-- Clear Button -->
            <Button Grid.Column="8" x:Name="ClearButton" Content="Clear" VerticalAlignment="Bottom"
                    Style="{StaticResource MaterialDesignAnimatedButton}" Click="ClearButton_Click" TabIndex="28"/>

            <!-- Update Button -->
            <Button Grid.Column="9" x:Name="UpdateButton" Content="Update" VerticalAlignment="Bottom"
        Style="{StaticResource MaterialDesignAnimatedButton}" Click="UpdateButton_Click"
        TabIndex="29" />



            <!-- Search Barcode -->
            <StackPanel Grid.Column="10" Margin="4">
                <TextBlock Text="Search Barcode" Style="{StaticResource MaterialDesignLabelTextBlock}"/>
                <TextBox x:Name="SearchBarcode" Text="{Binding SearchBarcode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}" Height="35" Padding="10"
                         materialDesign:HintAssist.Hint="Search Barcode" materialDesign:HintAssist.IsFloating="True"
                         TabIndex="31" ToolTip="Search Barcode" AutomationProperties.Name="Search Barcode"
                         TextChanged="SearchBarcode_TextChanged"/>
            </StackPanel>

            <!-- Search Icon -->
            <materialDesign:PackIcon Grid.Column="11" Kind="Magnify" Width="24" Height="24"
                                     HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0,0,0,10"
                                     Foreground="{DynamicResource PrimaryHueMidBrush}"
                                     MouseLeftButtonDown="SearchImage_MouseLeftButtonDown" TabIndex="32"/>
        </Grid>

        <!-- Row 5 -->
        <Grid Grid.Row="5" Margin="0,0,0,16">
            <ScrollViewer HorizontalScrollBarVisibility="Auto">
                <DataGrid x:Name="ItemDetailsDataGrid" Style="{StaticResource MaterialDesignDataGrid}"
                          ItemsSource="{Binding Items}" AutoGenerateColumns="False"
                          HeadersVisibility="Column" CanUserAddRows="False" CanUserDeleteRows="False"
                          SelectionChanged="ItemDetailsDataGrid_SelectionChanged" MaxHeight="300" IsReadOnly="True"
                          CellStyle="{StaticResource DataGridCellVerticalDivider}">
                    <DataGrid.Resources>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                        </Style>
                    </DataGrid.Resources>
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Width="80" Header="Select">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60" Visibility="Collapsed">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Barcode" Binding="{Binding Barcode}" Width="140">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Firm ID" Binding="{Binding Firm_Id}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="User" Binding="{Binding User_Name}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Stock Type" Binding="{Binding Stock_Type}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Particular" Binding="{Binding Particular}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Party Name" Binding="{Binding Party_Name}" Width="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Invoice No" Binding="{Binding Invoice_No}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Entry Date" Binding="{Binding Entry_Date, StringFormat=dd/MM/yyyy}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Image" Binding="{Binding Image}" Width="100" Visibility="Collapsed">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Sub-Category" Binding="{Binding SubCategory}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Design" Binding="{Binding Design}" Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Purity" Binding="{Binding Purity}" Width="80">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="HSN No" Binding="{Binding HSN_No}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Size" Binding="{Binding Size}" Width="80">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Pcs" Binding="{Binding Pcs}" Width="60">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Gross Wt" Binding="{Binding Gross_Wt, StringFormat=N3}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Less Wt" Binding="{Binding Less_Wt, StringFormat=N3}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Net Wt" Binding="{Binding Net_Wt, StringFormat=N3}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Net Rate" Binding="{Binding Net_Rate, StringFormat=N2}" Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Net Amount" Binding="{Binding Net_Amount, StringFormat=N2}" Width="110">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Other Charges" Binding="{Binding Other_Charges, StringFormat=N2}" Width="110">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Final Amount" Binding="{Binding Final_Amount, StringFormat=N2}" Width="110">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Remark" Binding="{Binding Remark}" Width="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Item ID" Binding="{Binding Item_Id}" Width="80">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Comment" Binding="{Binding Comment}" Width="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>
        </Grid>

        <!-- Row 6 -->
        <Grid Grid.Row="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0">
                <materialDesign:PackIcon Kind="ScaleBalance" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBlock Text="Available Weight:" FontSize="14" FontWeight="Bold" Style="{StaticResource MaterialDesignLabelTextBlock}" Margin="0,3,0,0"/>
                <TextBlock x:Name="AvailableWt" Text="{Binding AvailableWeight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N3}"
                FontSize="14" FontWeight="DemiBold" VerticalAlignment="Center" Margin="4,0"/>
            </StackPanel>
            
            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,16">
                <Button Content="◀ Previous"
                        Width="80" Height="30" Margin="5,0"
                        Background="Purple" Foreground="White"
                        Command="{Binding PreviousPageCommand}"
                        IsEnabled="{Binding Pagination.CanGoPrevious}"/>

                <TextBlock Text="{Binding Pagination.PageInfo}"
                           VerticalAlignment="Center" Margin="10,0"
                           FontWeight="DemiBold" FontSize="12"/>

                <Button Content="Next ▶"
                        Width="80" Height="30" Margin="5,0"
                        Background="Purple" Foreground="White"
                        Command="{Binding NextPageCommand}"
                        IsEnabled="{Binding Pagination.CanGoNext}"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                <Button x:Name="PrintBarcodeButton" Content="Print Barcode"
                        Style="{StaticResource MaterialDesignAnimatedButton}" Width="120" TabIndex="33" Click="PrintBarcodeButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>